# Walkthrough - Vanguard Playbook v2.2 (SOP Distillation)

**Mission:** Distill lessons from CevicheBar v0.4.0 into System Doctrine.
**Date:** 2026-01-10
**Voice:** Anti

---

## üìö 1. New Doctrines (SOPs)

We identified three critical gaps in our standards and created new "Bibles" for them.

### A. Security Doctrine (`docs/standards/SECURITY_DOCTRINE.md`)

**Owner:** Ana
**Trigger:** ReDoS vulnerability in v0.4.0.
**Laws:**

- **Input Boundary:** Max char limits on all inputs.
- **Regex Safety:** No nested quantifiers.
- **Secrets Firewall:** `.env` only.

### B. UX Doctrine (`docs/standards/UX_DOCTRINE.md`)

**Owner:** Claude
**Trigger:** "Cook Mode" usability constraints.
**Laws:**

- **Fingertip Physics:** 48px min touch targets.
- **Context Awareness:** Wake Lock for physical tasks.
- **Motion Meaning:** Animations must inform, not decorate.

### C. Tech Doctrine Update (`docs/standards/TECH_DOCTRINE.md`)

**Owner:** Gemini
**Trigger:** Sovereignty Mode & Nova Failure.
**Updates:**

- **Data Sovereignty:** Local-First (IndexedDB) is standard.
- **Terminal-First Verification:** Browser Tool prohibited for complex flows.

---

## ‚ö° 2. Protocol Optimization (Nova)

**Problem:** Nova's "Batch Verification" still triggered browser safety prompts (Confirmation Fatigue).
**Solution:** Updated `NOVA_PROTOCOL.md` (Section 2-D).
**New Rule:** **Terminal-First.** Nova must write Node.js scripts (`verify.js`) and run them in the terminal to bypass browser tool interactivity limits.

---

## üõ†Ô∏è 3. Tooling Enhancements

1.  **Templates:** Created `TASK_TEMPLATE.md` and `IMPLEMENTATION_PLAN_TEMPLATE.md` for consistent Project setup (Task v4.0).
2.  **Anti-Sync:** Created `/anti-sync` workflow for context restoration.
3.  **Refresh Script:** Updated `refresh_global.ps1` to display exact context file paths.

---

## Verification

| Component     | Status    | Evidence                       |
| :------------ | :-------- | :----------------------------- |
| **Doctrines** | ‚úÖ Active | Loaded in `refresh_global.ps1` |
| **Nova Rule** | ‚úÖ Active | `NOVA_PROTOCOL.md` updated     |
| **Templates** | ‚úÖ Active | `templates/` folder populated  |

_System State: OPTIMIZED._
